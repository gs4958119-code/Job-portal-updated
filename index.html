<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Job Portal</title>
<style>
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin:0; padding:0;
        min-height: 100vh;
        background: url('https://images.unsplash.com/photo-1591696205602-b77e056b7d12?auto=format&fit=crop&w=1950&q=80') no-repeat center center fixed;
        background-size: cover;
        color: #333;
    }
    body::before {
        content:"";
        position: fixed; top:0; left:0; right:0; bottom:0;
        background: rgba(0,0,0,0.45);
        z-index:-1;
    }
    header {
        background: rgba(0,123,255,0.95);
        color: white;
        padding:15px 20px;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top:0;
        box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        z-index: 100;
    }
    header h1 { font-size: 1.8em; }
    .right-buttons { display:flex; gap:10px; flex-wrap: wrap; }
    .right-buttons button, .right-buttons a {
        padding:8px 16px;
        border:none;
        border-radius:25px;
        cursor:pointer;
        font-weight:600;
        text-decoration:none;
        transition:0.3s;
    }
    .btn-primary{background:#28a745; color:white;}
    .btn-secondary{background:#ffc107; color:#333;}
    .btn-danger{background:#dc3545; color:white;}
    .btn-info{background:#17a2b8; color:white;}
    .right-buttons button:hover, .right-buttons a:hover{opacity:0.85;}

    .search-section {text-align:center; margin:30px auto;}
    .search-section input {
        width:320px; max-width:90%;
        padding:12px 15px; border-radius:50px; border:none;
        outline:none; font-size:1em; box-shadow:0 4px 10px rgba(0,0,0,0.2);
    }
    .search-section button {
        padding:12px 20px; border-radius:50px; border:none; margin-left:10px;
        background:#007bff; color:white; font-weight:600;
        cursor:pointer; box-shadow:0 4px 10px rgba(0,0,0,0.2);
        transition:0.2s;
    }
    .search-section button:hover{background:#0056b3;}

    .section-title {text-align:center; margin:20px 0; font-size:1.6em; color:#fff; text-shadow:0 2px 4px rgba(0,0,0,0.5);}

    .job-container{ max-width:1000px; margin:0 auto 50px; padding:0 15px; }
    .job-card {
        background: rgba(255,255,255,0.95); margin:15px 0; padding:20px; border-radius:15px;
        box-shadow:0 6px 20px rgba(0,0,0,0.2); transition:0.3s; display:flex; flex-direction:column;
    }
    .job-card:hover { transform: translateY(-3px); box-shadow:0 10px 25px rgba(0,0,0,0.25);}
    .job-card h3 { font-size:1.3em; margin-bottom:8px; color:#007bff;}
    .job-card p { margin-bottom:6px; font-size:0.95em; }
    .job-card button {
        align-self:flex-start; padding:10px 18px; border-radius:25px;
        background:#28a745; color:white; font-weight:600; margin-top:10px;
        border:none; box-shadow:0 4px 10px rgba(0,0,0,0.2); cursor:pointer; transition:0.2s;
    }
    .job-card button:hover{ background:#218838; }

    /* Modal Styles */
    .modal { display:none; position:fixed; z-index:999; left:0; top:0; width:100%; height:100%; overflow:auto; background-color:rgba(0,0,0,0.5);}
    .modal-content { background:#fff; margin:5% auto; padding:20px; border-radius:10px; width:90%; max-width:500px;}
    .modal-content input, .modal-content textarea{ width:100%; padding:10px; margin:6px 0; border:1px solid #ccc; border-radius:5px;}
    .modal-content button { background:#28a745; color:white; border:none; padding:12px; width:100%; border-radius:5px; cursor:pointer; font-weight:bold; margin-top:10px;}
    .modal-content button:hover{ background:#218838;}
    .close{ color:red; float:right; font-size:24px; font-weight:bold; cursor:pointer;}
</style>
</head>
<body>

<header>
    <h1>Job Portal</h1>
    <div class="right-buttons">
        <button id="registerBtn" class="btn-secondary">Register</button>
        <button onclick="window.location.href='post-job.html'" class="btn-primary">‚ûï Post Job</button>
        <button onclick="window.location.href='applications.html'" class="btn-info">üìÑ My Applications</button>
        <a href="manage-jobs.html" class="btn-primary">üíº Manage Jobs</a>
        <button onclick="window.location.href='my-posted-jobs.html'" class="btn-primary">üè¢ My Posted Jobs</button>
        <button onclick="logout()" class="btn-danger">Logout üö™</button>
    </div>
</header>

<section class="search-section">
    <input type="text" id="searchInput" placeholder="Search by title, company, location...">
    <button onclick="searchJob()">Search</button>
</section>

<h2 class="section-title">Available Jobs</h2>
<div id="jobContainer" class="job-container"></div>

<!-- Apply Modal -->
<div id="applyModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h2>Apply for Job</h2>
        <input type="text" id="appName" placeholder="Full Name" required>
        <input type="email" id="appEmail" placeholder="Email" required>
        <input type="url" id="appResume" placeholder="Resume Link (PDF/Drive)">
        <input type="text" id="appDegree" placeholder="Degree / Qualification">
        <textarea id="appMessage" placeholder="Additional Message"></textarea>
        <button onclick="submitApplication()">Submit Application</button>
    </div>
</div>

<script>
// Job data
let jobs = JSON.parse(localStorage.getItem("jobs")) || [];
let selectedJobId = null;

// Hide register if logged in
const registerBtn = document.getElementById("registerBtn");
if(localStorage.getItem("loggedIn")==="true") registerBtn.style.display="none";

// Display jobs
function displayJobs(jobArray){
    const container = document.getElementById("jobContainer");
    container.innerHTML="";
    if(jobArray.length===0){
        container.innerHTML="<p style='text-align:center;color:white;'>No jobs found ‚ùå</p>";
        return;
    }
    jobArray.forEach(job=>{
        container.innerHTML+=`
        <div class="job-card">
            <h3>${job.title}</h3>
            <p><b>Company:</b> ${job.company||'Tech Corp'}</p>
            <p><b>Location:</b> ${job.location}</p>
            <p><b>Salary:</b> ${job.salary}</p>
            <p>${job.description}</p>
            <button onclick="openApplyModal(${job.id})">Apply</button>
        </div>`;
    });
}
displayJobs(jobs);

// Search jobs
function searchJob(){
    const query = document.getElementById("searchInput").value.toLowerCase();
    const filtered = jobs.filter(job=>
        job.title.toLowerCase().includes(query) ||
        (job.company && job.company.toLowerCase().includes(query)) ||
        (job.location && job.location.toLowerCase().includes(query))
    );
    displayJobs(filtered);
}
document.getElementById("searchInput").addEventListener("keyup", function(e){
    if(e.key==="Enter") searchJob();
});

// Logout
function logout(){ localStorage.removeItem("loggedIn"); window.location.href="login.html"; }

// APPLY MODAL FUNCTIONS
function openApplyModal(jobId){
    selectedJobId = jobId;
    document.getElementById("applyModal").style.display="block";
}
function closeModal(){
    document.getElementById("applyModal").style.display="none";
    selectedJobId = null;
    ["appName","appEmail","appResume","appDegree","appMessage"].forEach(id=>{
        document.getElementById(id).value="";
    });
}
function submitApplication(){
    const name = document.getElementById("appName").value.trim();
    const email = document.getElementById("appEmail").value.trim();
    if(!name || !email){ alert("Name and Email required"); return; }

    const resume = document.getElementById("appResume").value.trim();
    const degree = document.getElementById("appDegree").value.trim();
    const message = document.getElementById("appMessage").value.trim();

    let applications = JSON.parse(localStorage.getItem("applications")) || [];
    let job = jobs.find(j=>j.id===selectedJobId);
    if(!job){ alert("Job not found"); return; }

    applications.push({
        jobId: job.id,
        jobTitle: job.title,
        company: job.company||'Tech Corp',
        name,
        email,
        resume,
        degree,
        message
    });
    localStorage.setItem("applications", JSON.stringify(applications));
    alert("Application submitted ‚úÖ");
    closeModal();
}
</script>
</body>
</html>